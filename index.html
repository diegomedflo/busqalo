{% extends 'base.html' %}
{% block content %}
    <style type="text/css">
    .slider {
        width: 80%;
        margin: 20px auto;
    }
    .slick-slide {
        margin: 0px 20px;
    }
    .slick-slide img {
         width: auto;
         max-width: calc(100% - 10px);
    }
    .slick-prev:before,
    .slick-next:before {
         color: black;
    }
    .slick-slide {
         transition: all ease-in-out .3s;
    }
  </style>
<section>
    <form class="index_form" action="/buscar" method="get">
        <p class="index_title" >¿Qué quieres comprar hoy?</p>
        <input class="input_search_index" maxlength="128" name="qsearchw" placeholder="Huawei P30 Pro" type="text" required>
        <div class="flex_prices_index" >
            <input class="input_search_index_50" maxlength="128" name="qminprice" placeholder="Precio mínimo" type="number" required>
            <input class="input_search_index_50" maxlength="128" name="qmaxprice" placeholder="Precio máximo" type="number" required>
        </div>
        <input class="index_search" type="submit" value="Buscar">
        <p class="index_description" ><strong>Encuentra los productos de estas tiendas online, en un solo lugar.: </strong><br>La Curacao, Saga Falabella, Hiraoka, Linio, Mercado Libre, Metro,
            Oechsle, Ripley, Smartphones Perú, Sodimac, Loginstore, Plaza Vea, Tiendas EFE, Juntoz</p>
    </form>
</section>
<h2 class="category_title" style="margin-left: 10%; margin-right: 10%; width: 80%;">Más populares</h2>
<section class="regular slider responsive">
    {% if data['url'].count() == 0 %}
        <div class="empty_index">Productos no disponibles..</div>
    {% else %}
        {% for row in data.itertuples() %}
            <div class="item">
                <div class="item_store"><h5>{{ row.page }}</h5></div>
                <div class="div_img">
                    <img src="{{ row.img }}" alt="image-product">
                </div>
                <p class="title_item"><a target="_blank"  href="{{ row.url }}">{{ row.title }}</a></p>
                <div class="div_prices">
                    {% if row.old_int_price == row.offer_int_price%}
                        <span class="offer_price"><strong>S/ {{ row.offer_int_price }}</strong></span>
                    {% else %}
                        <span class="old_price">S/ {{ row.old_int_price }}</span>
                        <span class="offer_price"><strong>S/ {{ row.offer_int_price }}</strong></span>
                    {% endif %}
                </div>
                <a class="button_item_a" href="{{ row.url }}" target="_blank"><button class="button_item">Ver Producto</button></a>
            </div>
        {% endfor %}
    {% endif %}

</section>
<script type="text/javascript">
    $(document).on('ready', function() {
      $(".regular").slick({
        dots: false,
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 1
      });
    });
    $('.responsive').slick({
  dots: false,
  infinite: true,
  speed: 700,
  slidesToShow: 4,
  slidesToScroll: 1,
  responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 3,
        slidesToScroll: 1,
        infinite: true,
        dots: false
      }
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 1
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1
      }
    }
    // You can unslick at a given breakpoint now by adding:
    // settings: "unslick"
    // instead of a settings object
  ]
});
</script>
{% endblock %}